<html>
  <head>
    <link rel="stylesheet" type="text/css" href="./main.css" />
    <script src="./js/jq.js"></script>
    <script src="./js/random.js"></script>
    <script src="./js/page.js"></script>
    <script src="./js/ctCode.js"></script>
    <script src="./js/saveURL.js"></script>
    <script>
      try{
      localStorage.Data = localStorage.getItem("Data") || '{"userState":0,"times":5}';
      let Data = JSON.parse(localStorage.Data),
          date = new Date();
      Data.date || (Data.date = date.getDate())
      if(date.getDate() != Data.date){
        Data.userState || (Data.times = 5);
        Data.date = date.getDate();
      }
      Data.passwords = [];
      Data.index = random.randInt(0,499);
      for(let i = 0;i < 500;++i){
        let s = Math.round(random.random()*1000000);
        Data.passwords.push(s);
      }
      function welcome(){
        alert("欢迎来到LWS搭建的网页！");
        if(confirm("此网站服务每天仅可免费使用5次，是否继续使用？")){
          alert(eval(prompt("请输入指定代码获取激活码！")));
          let answer = prompt("输入激活码(6位数字)可无限使用");
          if(answer == Data.passwords[Data.index]){
            alert("欢迎使用！");
            Data.userState = 1;
            Data.times = Infinity;
            /*delete Data.passwords;
            delete Data.index;
            localStorage.Data = JSON.stringify(Data);*/
          }else{
            if(confirm("激活码错误！是否重答")){
              welcome()
            }else{
              alert("欢迎使用（免费版）！");
              /*delete Data.passwords;
              delete Data.index;
              localStorage.Data = JSON.stringify(Data);*/
            }
          }
        }else{
          history.back();
        }
      }
      if(!JSON.parse(localStorage.Data).userState)welcome();
      delete Data.passwords;
      delete Data.index;
      localStorage.Data = JSON.stringify(Data);
      Data = null;
      }catch(e){alert(e.stack)}
    </script>
  </head>
  <body>
    <h1 class="text-color-sharking text-align-center">LWS的网站---欢迎光临！</h1>
    <div id="mainPage">
      <div class="box">
        <a href="./pages/usualWebsites.html" id="usualWebsite">常用网站</a>
      </div>
      <div class="box">
        <a href="./pages/colorfulTextCreater.html">绚丽字幕生成器</a>
      </div>
    </div>
    <div id="tools">
      <button onclick="history.back()">返回</button>
      <button id="ConsoleCode">调试代码</div>
      <div id="createIframe">
        <span>请输入完整网址：</span><input id="UserInput">
        <button id="UserSubmit">生成网页</button>
        <button id="saveUserURL" onclick="saveURL(userInput.value)">保存</button>
        <button id="help">帮助</button>
      </div>
    </div>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script>var vConsole = new window.VConsole();</script>
    <script src="./main.js"></script>
  </body>
</html>
