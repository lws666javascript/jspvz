<html>
  <head>
    <link rel="stylesheet" href="../css/common.css" />
    <script src="../js/jq.js"></script>
    <style>
      *{text-align:center}
      .loading{width:100vw;height:100vh;background-color:white;}
      .loading .loadingRow{width:80vw;height:10vh;background-color:black;border:2px solid skyblue;
      border-radius:5vh;overflow:hidden;
      }
      .loadingRow div{background-color:yellow;width:0;height:100%;}
    </style>
  </head>
  <body>
    <div class="loading center">
      <div class="loadingRow center"><div></div></div>
      <h2>加载中<span>0%</span>,请稍候......</h2>
    </div>
    <div class="back" onclick="history.back()">←</div>
    <script>
      const anm = jq.animation;
      anm.start();
      function loadingRow(){
        let r = jq(".loadingRow div"),
            n = jq("h2 span");
        r.Data.set("a",0);
        let p = r.parent();
        if(r.w <= p.w*0.3){
          r.resize([r.w+1+"px"]);
          r.data.a+=1;
          n.set({inner:r.data.a+"%"})
        }else if(r.w > 0.3*p.w && r.w < 0.98 * p.w){
          r.resize([r.w+5+"px"]);
          r.data.a+=5;
          n.set({inner:`${r.data.a}%`})
        }else if(r.w < p.w){
          setTimeout(function(){
            r.resize([r.w+0.1+"px"]);
            r.data.a+=0.1;
            n.set({inner:r.data.a+"%"})
          },10000);
        }else{
          anm.remove(loadingRow);
          alert("加载完成！")
        }
      }
      anm.add(loadingRow);
    </script>
  </body>
</html>
